---
// src/components/UserForm.astro
import { db } from '../scripts/firebaseInit.js';
import { collection, addDoc } from 'firebase/firestore';
import { useState } from 'react';

// Function to add a user to Firestore
async function addUser(name, email) {
  try {
    await addDoc(collection(db, "users"), {
      name: name,
      email: email,
    });
    console.log("Document written");
  } catch (e) {
    console.error("Error adding document: ", e);
  }
}

const handleSubmit = async (event) => {
  event.preventDefault();
  const name = event.target.name.value;
  const email = event.target.email.value;
  await addUser(name, email);
};

// React state is not directly used here but illustrates how you might manage form state or submission status
const [submissionStatus, setSubmissionStatus] = useState('');
---

<form on:submit|preventDefault={handleSubmit}>
  <label for="name">Name:</label>
  <input id="name" name="name" type="text" required />
  <label for="email">Email:</label>
  <input id="email" name="email" type="email" required />
  <button type="submit">Submit</button>
</form>
<p>{submissionStatus}</p>
